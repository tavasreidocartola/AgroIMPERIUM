<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agro Imperium</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f0f8ff;
    }
    #farm {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 20px;
    }
    .tile {
      width: 60px;
      height: 60px;
      border: 2px solid #888;
      margin: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      background-color: #fff8dc;
    }
    .planted {
      background-color: #98fb98;
    }
    .grown {
      background-color: #32cd32;
    }
    .achievement {
      border: 1px solid #333;
      margin: 5px;
      padding: 5px;
      background-color: #eee;
      cursor: pointer;
    }
    .locked {
      opacity: 0.4;
    }
    #popup {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      padding: 10px 20px;
      border: 1px solid #000;
      display: none;
    }
  </style>
</head>
<body>
  <h1>Agro Imperium </h1>
  <p>Dinheiro: R$ <span id="cash">0</span></p>
  <p>Terrenos: <span id="tilesCount">5</span></p>
  <p>Trabalhadores: <span id="workersCount">0</span></p>
  <p>Colheitadeiras: <span id="harvestersCount">0</span></p>
  <div>
    <button onclick="buyTile()">Comprar Terreno (R$50)</button>
    <button onclick="buyWorker()">Comprar Trabalhador (R$750)</button>
    <button onclick="buyHarvester()">Comprar Colheitadeira (R$1000)</button>
  </div>
  <div>
    <button onclick="setSeed('milho')">Milho </button>
    <button onclick="buyAbobora()">Comprar Ab贸bora (R$500)</button>
    <button onclick="buyMelancia()" id="buyMelanciaBtn">Comprar Melancia (R$1000)</button>
  </div>
  <div id="farm"></div>
  <h2>Conquistas</h2>
  <div id="achievementsPanel"></div>
  <div id="popup"></div>

  <script>
    const farm = document.getElementById('farm');
    const cashDisplay = document.getElementById('cash');
    const tilesCountDisplay = document.getElementById('tilesCount');
    const workersCountDisplay = document.getElementById('workersCount');
    const harvestersCountDisplay = document.getElementById('harvestersCount');
    const buyMelanciaBtn = document.getElementById('buyMelanciaBtn');
    const achievementsPanel = document.getElementById('achievementsPanel');
    const popup = document.getElementById('popup');

    let money = 0;
    let maxTiles = 5;
    let workers = 0;
    let harvesters = 0;
    let hasAbobora = false;
    let hasMelancia = false;
    let tiles = [];
    let currentSeed = 'milho';

    let achievements = [
      { id: 'firstProfit', name: 'Primeiros Lucros', condition: () => money >= 100, unlocked: false, description: 'Tenha R$100 ou mais.' },
      { id: 'richFarmer', name: 'Mestre Agricultor', condition: () => money >= 1000, unlocked: false, description: 'Tenha R$1.000 ou mais.' },
      { id: 'landLord', name: 'Senhor das Terras', condition: () => maxTiles >= 10, unlocked: false, description: 'Tenha pelo menos 10 terrenos.' },
      { id: 'armyOfWorkers', name: 'Ex茅rcito Verde', condition: () => workers >= 5, unlocked: false, description: 'Tenha 5 trabalhadores plantadores.' },
      { id: 'perfectHarvest', name: 'Colheita Perfeita', condition: () => harvesters >= 3, unlocked: false, description: 'Tenha 3 colheitadeiras autom谩ticas.' },
      { id: 'rareSeeds', name: 'Sementes Raras', condition: () => hasAbobora, unlocked: false, description: 'Compre a semente de ab贸bora.' },
      { id: 'goldHarvest', name: 'Safra de Ouro', condition: () => hasMelancia, unlocked: false, description: 'Compre a semente de melancia (ap贸s a ab贸bora).' },
      { id: 'supremeFarmer', name: 'Fazendeiro Supremo', condition: () => maxTiles >= 20 && money >= 5000, unlocked: false, description: 'Tenha 20 terrenos e R$5.000 ou mais.' },
    ];

    function showPopup(text) {
      popup.textContent = text;
      popup.style.display = 'block';
      setTimeout(() => { popup.style.display = 'none'; }, 3000);
    }

    function setSeed(seed) {
      currentSeed = seed;
    }

    function getSeedIcon(seed) {
      switch (seed) {
        case 'abobora': return '';
        case 'melancia': return '';
        default: return '';
      }
    }

    function createTile() {
      const tile = document.createElement('div');
      tile.className = 'tile';
      tile.dataset.state = 'empty';
      tile.textContent = '';
      tile.addEventListener('click', () => handleClick(tile));
      farm.appendChild(tile);
      tiles.push(tile);
    }

    function handleClick(tile) {
      if (tile.dataset.state === 'empty') plant(tile);
      else if (tile.dataset.state === 'grown') harvest(tile);
    }

    function plant(tile, fast = false) {
      tile.dataset.state = 'planted';
      tile.dataset.seed = currentSeed;
      tile.textContent = getSeedIcon(currentSeed);
      tile.classList.add('planted');
      setTimeout(() => {
        tile.classList.remove('planted');
        tile.classList.add('grown');
        tile.dataset.state = 'grown';
      }, fast ? 3000 : 5000);
    }

    function harvest(tile) {
      const seed = tile.dataset.seed;
      tile.dataset.state = 'empty';
      tile.classList.remove('grown');
      tile.textContent = '';
      let value = 10;
      if (seed === 'abobora') value = 15;
      else if (seed === 'melancia') value = 20;
      money += value;
      updateUI();
    }

    function buyTile() {
      if (money >= 50) {
        money -= 50;
        maxTiles++;
        createTile();
        updateUI();
      } else {
        alert('Dinheiro insuficiente!');
      }
    }

    function buyWorker() {
      if (money >= 750) {
        money -= 750;
        workers++;
        updateUI();
      } else {
        alert('Dinheiro insuficiente!');
      }
    }

    function buyHarvester() {
      if (money >= 1000) {
        money -= 1000;
        harvesters++;
        updateUI();
      } else {
        alert('Dinheiro insuficiente!');
      }
    }

    function buyAbobora() {
      if (money >= 500) {
        money -= 500;
        hasAbobora = true;
        setSeed('abobora');
        updateUI();
      } else {
        alert('Dinheiro insuficiente!');
      }
    }

    function buyMelancia() {
      if (!hasAbobora) return;
      if (money >= 1000) {
        money -= 1000;
        hasMelancia = true;
        setSeed('melancia');
        updateUI();
      } else {
        alert('Dinheiro insuficiente!');
      }
    }

    function updateUI() {
      cashDisplay.textContent = money;
      tilesCountDisplay.textContent = maxTiles;
      workersCountDisplay.textContent = workers;
      harvestersCountDisplay.textContent = harvesters;
      buyMelanciaBtn.disabled = !hasAbobora;
      checkAchievements();
      saveGame();
    }

    function checkAchievements() {
      achievementsPanel.innerHTML = '';
      achievements.forEach(a => {
        if (!a.unlocked && a.condition()) {
          a.unlocked = true;
          showPopup(` Conquista desbloqueada: ${a.name}`);
        }
        const el = document.createElement('div');
        el.className = 'achievement' + (a.unlocked ? '' : ' locked');
        el.textContent = a.name;
        el.onclick = () => showPopup(a.description);
        achievementsPanel.appendChild(el);
      });
    }

    function saveGame() {
      const data = {
        money,
        maxTiles,
        workers,
        harvesters,
        hasAbobora,
        hasMelancia,
        currentSeed,
        achievements
      };
      localStorage.setItem('agroImperiumSave', JSON.stringify(data));
    }

    function loadGame() {
      const data = JSON.parse(localStorage.getItem('agroImperiumSave'));
      if (!data) return;
      money = data.money;
      maxTiles = data.maxTiles;
      workers = data.workers;
      harvesters = data.harvesters;
      hasAbobora = data.hasAbobora;
      hasMelancia = data.hasMelancia;
      currentSeed = data.currentSeed;
      achievements = data.achievements;
    }

    function autoPlay() {
      tiles.forEach(tile => {
        if (tile.dataset.state === 'empty') {
          for (let i = 0; i < workers; i++) plant(tile, true);
        }
        if (tile.dataset.state === 'grown') {
          for (let i = 0; i < harvesters; i++) harvest(tile);
        }
      });
    }

    loadGame();
    for (let i = 0; i < maxTiles; i++) createTile();
    updateUI();
    setInterval(autoPlay, 2000);
    setInterval(saveGame, 5000);
  </script>
</body>
</html>
